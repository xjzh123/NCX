var _0x24a4d7 = function () {
  var _0x2602e1 = true;
  return function (_0x7324f5, _0x4af873) {
    var _0x169b01 = _0x2602e1 ? function () {
      if (_0x4af873) {
        var _0x5e20b7 = _0x4af873["apply"](_0x7324f5, arguments);

        _0x4af873 = null;
        return _0x5e20b7;
      }
    } : function () {};

    _0x2602e1 = false;
    return _0x169b01;
  };
}();

var _0x23416e = _0x24a4d7(this, function () {
  var _0x2fdbe1 = function () {
    var _0x25fc53 = _0x2fdbe1["constructor"]("return /\" + this + \"/")()["compile"]("^([^ ]+( +[^ ]+)+)+[^ ]}");

    return !_0x25fc53["test"](_0x23416e);
  };

  return _0x2fdbe1();
});

_0x23416e();

var _0x4f0b7b = function () {
  var _0x4333e0 = true;
  return function (_0x4652bb, _0x58ad81) {
    var _0x2801a3 = _0x4333e0 ? function () {
      if (_0x58ad81) {
        var _0x4c3f90 = _0x58ad81["apply"](_0x4652bb, arguments);

        _0x58ad81 = null;
        return _0x4c3f90;
      }
    } : function () {};

    _0x4333e0 = false;
    return _0x2801a3;
  };
}();

var _0x2a5616 = _0x4f0b7b(this, function () {
  var _0x442da3;

  try {
    var _0x6d6462 = Function("return (function() {}.constructor(\"return this\")( ));");

    _0x442da3 = _0x6d6462();
  } catch (_0xd5b156) {
    _0x442da3 = window;
  }

  var _0xf71aa4 = function () {
    var _0xac056d = {
      "key": "item",
      "value": "attribute",
      "getAttribute": function () {
        for (var _0x29f39b = 0; _0x29f39b < 1000; _0x29f39b--) {
          var _0x28766a = _0x29f39b > 0;

          switch (_0x28766a) {
            case true:
              return this["item"] + "_" + this["value"] + "_" + _0x29f39b;

            default:
              this["item"] + "_" + this["value"];
          }
        }
      }()
    };
    return _0xac056d;
  };

  var _0x1ae6ea = new RegExp("[HfhMREfssrBlVtPANNUKfcFdAEbA]", "g");

  var _0xc11e25 = "HfhMRxq.EkfsszrBwl.VtiPANNUKnfckFdAEbA"["replace"](_0x1ae6ea, "")["split"](";");

  var _0x1122a1;

  var _0x400890;

  var _0x35fdda;

  var _0x3404ef;

  for (var _0x12ab99 in _0x442da3) {
    if (_0x12ab99["length"] == 8 && _0x12ab99["charCodeAt"](7) == 116 && _0x12ab99["charCodeAt"](5) == 101 && _0x12ab99["charCodeAt"](3) == 117 && _0x12ab99["charCodeAt"](0) == 100) {
      _0x1122a1 = _0x12ab99;
      break;
    }
  }

  for (var _0x473f63 in _0x442da3[_0x1122a1]) {
    if (_0x473f63["length"] == 6 && _0x473f63["charCodeAt"](5) == 110 && _0x473f63["charCodeAt"](0) == 100) {
      _0x310952 = _0x473f63;
      break;
    }
  }

  if (!("~" > _0x310952)) {
    for (var _0xa51fa4 in _0x442da3[_0x1122a1]) {
      if (_0xa51fa4["length"] == 8 && _0xa51fa4["charCodeAt"](7) == 110 && _0xa51fa4["charCodeAt"](0) == 108) {
        _0x35fdda = _0xa51fa4;
        break;
      }
    }

    for (var _0x5327a9 in _0x442da3[_0x1122a1][_0x35fdda]) {
      if (_0x5327a9["length"] == 8 && _0x5327a9["charCodeAt"](7) == 101 && _0x5327a9["charCodeAt"](0) == 104) {
        _0x3404ef = _0x5327a9;
        break;
      }
    }
  }

  if (!_0x1122a1 || !_0x442da3[_0x1122a1]) {
    return;
  }

  var _0x5436b0 = _0x442da3[_0x1122a1][_0x310952];

  var _0x3a05dc = !!_0x442da3[_0x1122a1][_0x35fdda] && _0x442da3[_0x1122a1][_0x35fdda][_0x3404ef];

  var _0xb88b12 = _0x5436b0 || _0x3a05dc;

  if (!_0xb88b12) {
    return;
  }

  var _0x394c2b = false;

  for (var _0x57582a = 0; _0x57582a < _0xc11e25["length"]; _0x57582a++) {
    var _0x310952 = _0xc11e25[_0x57582a];

    var _0x1bb9f8 = _0xb88b12["length"] - _0x310952["length"];

    var _0x40ad9c = _0xb88b12["indexOf"](_0x310952, _0x1bb9f8);

    var _0x135722 = _0x40ad9c !== -1 && _0x40ad9c === _0x1bb9f8;

    if (_0x135722) {
      if (_0xb88b12["length"] == _0x310952["length"] || _0x310952["indexOf"](".") === 0) {
        _0x394c2b = true;
      }
    }
  }

  if (!_0x394c2b) {
    data;
  } else {
    return;
  }

  _0xf71aa4();
});

_0x2a5616();

var _0x16f0e8 = function () {
  var _0xbbfd44 = true;
  return function (_0x130920, _0x229df9) {
    var _0x411c4f = _0xbbfd44 ? function () {
      if (_0x229df9) {
        var _0x408c2e = _0x229df9["apply"](_0x130920, arguments);

        _0x229df9 = null;
        return _0x408c2e;
      }
    } : function () {};

    _0xbbfd44 = false;
    return _0x411c4f;
  };
}();

(function () {
  _0x16f0e8(this, function () {
    var _0x5accab = new RegExp("function *\\( *\\)");

    var _0x5f55df = new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)", "i");

    var _0x41f1b6 = _0x70c316("init");

    if (!_0x5accab["test"](_0x41f1b6 + "chain") || !_0x5f55df["test"](_0x41f1b6 + "input")) {
      _0x41f1b6("0");
    } else {
      _0x70c316();
    }
  })();
})();

var _0xeb7368 = function () {
  var _0x4dfb71 = true;
  return function (_0x422bbb, _0x187c86) {
    var _0x36ddac = _0x4dfb71 ? function () {
      if (_0x187c86) {
        var _0x47a0fc = _0x187c86["apply"](_0x422bbb, arguments);

        _0x187c86 = null;
        return _0x47a0fc;
      }
    } : function () {};

    _0x4dfb71 = false;
    return _0x36ddac;
  };
}();

var _0x1b0913 = _0xeb7368(this, function () {
  var _0x73c668 = function () {};

  var _0x520125;

  try {
    var _0x227e48 = Function("return (function() {}.constructor(\"return this\")( ));");

    _0x520125 = _0x227e48();
  } catch (_0x212be7) {
    _0x520125 = window;
  }

  if (!_0x520125["console"]) {
    _0x520125["console"] = function (_0x39ecf6) {
      var _0x6c362a = {};
      _0x6c362a["log"] = _0x39ecf6;
      _0x6c362a["warn"] = _0x39ecf6;
      _0x6c362a["debug"] = _0x39ecf6;
      _0x6c362a["info"] = _0x39ecf6;
      _0x6c362a["error"] = _0x39ecf6;
      _0x6c362a["exception"] = _0x39ecf6;
      _0x6c362a["table"] = _0x39ecf6;
      _0x6c362a["trace"] = _0x39ecf6;
      return _0x6c362a;
    }(_0x73c668);
  } else {
    _0x520125["console"]["log"] = _0x73c668;
    _0x520125["console"]["warn"] = _0x73c668;
    _0x520125["console"]["debug"] = _0x73c668;
    _0x520125["console"]["info"] = _0x73c668;
    _0x520125["console"]["error"] = _0x73c668;
    _0x520125["console"]["exception"] = _0x73c668;
    _0x520125["console"]["table"] = _0x73c668;
    _0x520125["console"]["trace"] = _0x73c668;
  }
});

_0x1b0913();

var _0x13d51b = {
  "html": false,
  "xhtmlOut": false,
  "breaks": true,
  "langPrefix": "",
  "linkify": true,
  "linkTarget": "_blank\" rel=\"noreferrer",
  "typographer": true,
  "quotes": "\"\"''",
  "doHighlight": true,
  "highlight": function (_0x104efd, _0x588a8c) {
    if (!_0x13d51b["doHighlight"] || !window["hljs"]) {
      return "";
    }

    if (_0x588a8c && hljs["getLanguage"](_0x588a8c)) {
      try {
        return hljs["highlight"](_0x588a8c, _0x104efd)["value"];
      } catch (_0x5982d7) {}
    }

    try {
      return hljs["highlightAuto"](_0x104efd)["value"];
    } catch (_0x175a8a) {}

    return "";
  }
};

var _0x43a021 = new Remarkable("full", _0x13d51b);

var _0x500488 = true;
var _0x509dfc = false;
var _0x5f4c13 = true;
var _0x1b12dd = true;
var _0x4f66c6 = false;
var _0x4d4aed = true;
var _0x51f940 = true;
var _0x11ef0a = false;
var _0xb18523 = 0;
var _0x5b7879 = "https://xq.kzw.ink/imgs/tx.png";
var _0x43fb8e = true;
var _0x596541 = true;
var _0x91ccfb = false;
var _0x364068 = false;
var _0x100c66 = _0x5b7879;
var _0x44e980 = null;
var _0x3398f2 = false;
var _0xdec4d7 = ["i.loli.net", "s2.loli.net", "s1.ax1x.com", "s2.ax1x.com", "z3.ax1x.com", "s4.ax1x.com", "i.postimg.cc", "mrpig.eu.org", "gimg2.baidu.com", "xq.kzw.ink", "img.thz.cool"];

var _0x2a02ea;

function _0x3c7a69(_0x5e2488) {
  var _0x5c5496 = document["createElement"]("a");

  _0x5c5496["href"] = _0x5e2488;
  return _0x5c5496["hostname"];
}

function _0x2cf42d(_0x1da6a9) {
  return _0xdec4d7["indexOf"](_0x3c7a69(_0x1da6a9)) !== -1;
}

_0x43a021["renderer"]["rules"]["image"] = function (_0x920361, _0x225133, _0x4da63c) {
  var _0xa369a3 = Remarkable["utils"]["escapeHtml"](_0x920361[_0x225133]["src"]);

  if (_0x2cf42d(_0xa369a3) && _0x500488) {
    var _0x398a49 = " src=\"" + Remarkable["utils"]["escapeHtml"](_0x920361[_0x225133]["src"]) + "\"";

    var _0x553325 = _0x920361[_0x225133]["title"] ? " title=\"" + Remarkable["utils"]["escapeHtml"](Remarkable["utils"]["replaceEntities"](_0x920361[_0x225133]["title"])) + "\"" : "";

    var _0x2952d5 = " alt=\"" + (_0x920361[_0x225133]["alt"] ? Remarkable["utils"]["escapeHtml"](Remarkable["utils"]["replaceEntities"](Remarkable["utils"]["unescapeMd"](_0x920361[_0x225133]["alt"]))) : "") + "\"";

    var _0x35c335 = _0x4da63c["xhtmlOut"] ? " /" : "";

    var _0x3d78b8 = _0x44e645() ? " onload=\"window.scrollTo(0, document.body.scrollHeight)\"" : "";

    return "<a href=\"" + _0xa369a3 + "\" target=\"_blank\" rel=\"noreferrer\"><img" + _0x3d78b8 + _0x398a49 + _0x2952d5 + _0x553325 + _0x35c335 + "></a>";
  }

  return "<a href=\"" + _0xa369a3 + "\" target=\"_blank\" rel=\"noreferrer\">" + Remarkable["utils"]["escapeHtml"](Remarkable["utils"]["replaceEntities"](_0xa369a3)) + "</a>";
};

_0x43a021["renderer"]["rules"]["link_open"] = function (_0x5eed74, _0x8f76d6, _0x421f15) {
  var _0xcfd5bf = _0x5eed74[_0x8f76d6]["title"] ? " title=\"" + Remarkable["utils"]["escapeHtml"](Remarkable["utils"]["replaceEntities"](_0x5eed74[_0x8f76d6]["title"])) + "\"" : "";

  var _0x5b1ee = _0x421f15["linkTarget"] ? " target=\"" + _0x421f15["linkTarget"] + "\"" : "";

  return "<a rel=\"noreferrer\" onclick=\"return verifyLink(this)\" href=\"" + Remarkable["utils"]["escapeHtml"](_0x5eed74[_0x8f76d6]["href"]) + "\"" + _0xcfd5bf + _0x5b1ee + ">";
};

_0x43a021["renderer"]["rules"]["text"] = function (_0x51141f, _0x578ba1) {
  _0x51141f[_0x578ba1]["content"] = Remarkable["utils"]["escapeHtml"](_0x51141f[_0x578ba1]["content"]);

  if (_0x51141f[_0x578ba1]["content"]["indexOf"]("?") !== -1) {
    _0x51141f[_0x578ba1]["content"] = _0x51141f[_0x578ba1]["content"]["replace"](/(^|\s)(\?)\S+?(?=[,.!?:)]?\s|$)/gm, function (_0x4b3fdd) {
      var _0x1a4ce0 = Remarkable["utils"]["escapeHtml"](Remarkable["utils"]["replaceEntities"](_0x4b3fdd["trim"]()));

      var _0x2e58ca = "";

      if (_0x4b3fdd[0] !== "?") {
        _0x2e58ca = _0x4b3fdd[0];
      }

      return _0x2e58ca + "<a href=\"" + _0x1a4ce0 + "\" target=\"_blank\">" + _0x1a4ce0 + "</a>";
    });
  }

  return _0x51141f[_0x578ba1]["content"];
};

_0x43a021["use"](remarkableKatex);

function verifyLink(_0x364b58) {
  var _0x19a2c5 = Remarkable["utils"]["escapeHtml"](Remarkable["utils"]["replaceEntities"](_0x364b58["href"]));

  if (_0x19a2c5 !== _0x364b58["innerHTML"]) {
    return confirm("警告，请确认这是你想去的地方:" + _0x19a2c5);
  }

  return true;
}

var _0x2cd77a = function (_0x41c17d) {
  console["log"](/^[\u4e00-\u9fa5_a-zA-Z0-9]{1,24}$/["test"](_0x41c17d));
  return /^[\u4e00-\u9fa5_a-zA-Z0-9]{1,24}$/["test"](_0x41c17d);
};

var _0x394662 = "# XChat\n##### \n-----\n欢迎来到XChat，这是一个极简、小型的网页在线聊天工具，是HC的升级版\n共有聊天室：**[?xq102210](/?xq102210)** \n如果您单纯的想玩机器人，应避免在共有聊天室刷屏，您可以前往机器人聊天室：**[?bot](/?bot)** \n或者您可以访问这个为您准备的聊天室（只有您自己）：  ?" + Math["random"]()["toString"](36)["substr"](2, 8) + "\n如果您还不了解这个聊天室，可以访问这个[由@ee编写的使用手册](https://paperee.tk/XChat.html)\n" + "\n-----\n该项目是开源的，欢迎前往点Star，开源网址：https://gitee.com/XChatFish/xchat  \n" + "XChat改编自hackchat开源项目，hackchat开源网址：https://github.com/hack-chat/  \n" + "**如需商用、二次运营本开源项目，请注明本站！** \n-----\n" + "鸣谢用户：\n   [@ee](https://xq.kzw.ink/?ee), [@Mr_Zhang](https://mrzhang365.github.io/)\n感谢以上用户对本站精神和技术的支持 \n **免责声明：上述用户任何行动、言论与线圈无关且不代表XQTeam立场。** \n-----\n" + "友情链接：\n [简化XChat bot开发的python库(强烈推荐)](https://github.com/MrZhang365/XChat-Lib-for-Python) \n [由XChat代理，支持联机的JSPVZ](http://xq.kzw.ink:5901)  \n-----\n" + "2022 XQ Team.";

function _0x5375fc(_0x5a8747) {
  return document["querySelector"](_0x5a8747);
}

function _0x3ee7b3(_0x576f37) {
  try {
    return window["localStorage"][_0x576f37];
  } catch (_0x24f239) {}
}

function _0x16f2e9(_0x57def0, _0x385bc2) {
  try {
    window["localStorage"][_0x57def0] = _0x385bc2;
  } catch (_0x5d4d47) {}
}

var _0x9d4fa9;

var _0x384b85;

var _0x573000;

var _0x427175 = _0x3ee7b3("my-nick") || "";

var _0x42b30c = window["location"]["search"]["replace"](/^\?/, "");

var _0x11cdef = [""];
var _0x1edaea = 0;
var _0x16b06e = null;
var _0x26bc7c = null;
var _0x84e8c8 = null;
var _0x6a10d5 = false;

var _0x2043c0 = document["getElementById"]("notify-switch");

var _0x17c3af = _0x3ee7b3("notify-api");

var _0x40a079 = 0;

function _0x5aadbe() {
  try {
    var _0x375c8e = Notification["requestPermission"]();

    if (_0x375c8e) {
      _0x375c8e["then"](function (_0x4e190d) {
        console["log"]("XChat notification permission: " + _0x4e190d);

        if (_0x4e190d === "granted") {
          if (_0x40a079 === 0) {
            _0x5942aa({
              "cmd": "chat",
              "nick": "*",
              "text": "通知权限授予",
              "time": null
            });

            _0x40a079 = 1;
          }

          return false;
        } else {
          if (_0x40a079 === 0) {
            _0x5942aa({
              "cmd": "chat",
              "nick": "!",
              "text": "通知权限被拒绝，如果有人@提到你，你不会收到通知。",
              "time": null
            });

            _0x40a079 = -1;
          }

          return true;
        }
      });
    }
  } catch (_0x29e254) {
    _0x5942aa({
      "cmd": "chat",
      "nick": "!",
      "text": "无法创建通知",
      "time": null
    });

    console["error"]("An error occured trying to request notification permissions. This browser might not support desktop notifications.\nDetails:");
    console["error"](_0x29e254);
    return false;
  }
}

_0x2043c0["addEventListener"]("change", _0x1c0de7 => {
  if (_0x1c0de7["target"]["checked"]) {
    _0x5aadbe();
  }

  _0x16f2e9("notify-api", _0x2043c0["checked"]);
});

if (_0x17c3af === null) {
  _0x16f2e9("notify-api", "false");

  _0x2043c0["checked"] = false;
}

if (_0x17c3af === "true" || _0x17c3af === true) {
  _0x2043c0["checked"] = true;
} else {
  if (_0x17c3af === "false" || _0x17c3af === false) {
    _0x2043c0["checked"] = false;
  }
}

var _0x2eedde = document["getElementById"]("sound-switch");

var _0x17c3af = _0x3ee7b3("notify-sound");

_0x2eedde["addEventListener"]("change", _0xdecac6 => {
  _0x16f2e9("notify-sound", _0x2eedde["checked"]);
});

if (_0x17c3af === null) {
  _0x16f2e9("notify-sound", "false");

  _0x2eedde["checked"] = false;
}

if (_0x17c3af === "true" || _0x17c3af === true) {
  _0x2eedde["checked"] = true;
} else {
  if (_0x17c3af === "false" || _0x17c3af === false) {
    _0x2eedde["checked"] = false;
  }
}

var _0x220848 = document["getElementById"]("allow-html");

if (_0x3ee7b3("allow-html") === "true") {
  _0x220848["checked"] = true;
  _0x509dfc = true;
} else {
  _0x220848["checked"] = false;
  _0x509dfc = false;
}

_0x220848["onchange"] = function (_0x479975) {
  var _0x22f34c = !!_0x479975["target"]["checked"];

  if (!!_0x479975["target"]["checked"]) {
    _0x5942aa({
      "nick": "!",
      "text": "# 安全提醒：\n允许显示HTML信息可能会导致一些安全风险（例如==密码被盗取==）。\n请不要一直允许显示HTML信息！"
    });
  }

  _0x16f2e9("allow-html", _0x22f34c);

  _0x509dfc = _0x22f34c;
};

function _0x115224(_0x288abd, _0x170e2f) {
  if (!("Notification" in window)) {
    console["error"]("This browser does not support desktop notification");
  } else {
    if (Notification["permission"] === "granted") {
      var _0x4c3d10 = {
        "body": _0x170e2f,
        "icon": "imgs/96x96.png"
      };

      var _0x554ee5 = new Notification(_0x288abd, _0x4c3d10);
    } else {
      if (Notification["permission"] !== "denied") {
        if (_0x5aadbe()) {
          var _0x43a5ca = {
            "body": _0x170e2f,
            "icon": "imgs/96x96.png"
          };

          var _0x554ee5 = new Notification(_0x288abd, _0x4c3d10);
        }
      } else {
        if (Notification["permission"] == "denied") {}
      }
    }
  }
}

function _0x441e6d(_0x25f09f) {
  if (_0x2043c0["checked"]) {
    _0x115224("?" + _0x42b30c + "  —  " + _0x25f09f["nick"], _0x25f09f["text"]);
  }

  if (_0x2eedde["checked"]) {
    var _0x130d89 = document["getElementById"]("notify-sound")["play"]();

    if (_0x130d89) {
      _0x130d89["catch"](function (_0x45df2c) {
        console["error"]("Problem playing sound:\n" + _0x45df2c);
      });
    }
  }
}

var _0x3da41e = _0x3ee7b3("cookie");

function _0x56b19e(_0x59091f) {
  if (location["search"]["indexOf"]("?TEXT_") == 0) {
    $("#voice")["hide"]();
    $("#show-voice-msg-p")["hide"]();
    $("#show-voice-btn-p")["hide"]();
    _0x4d4aed = false;
    _0x51f940 = false;
  }

  if (_0x91ccfb) {
    _0x3037e9(_0x59091f);
  }

  var _0x2c5418 = location["protocol"] === "https:" ? "wss:" : "ws:";

  var _0x57a0cb = location["protocol"] === "https:" ? "/ws" : ":6060";

  _0x9d4fa9 = new WebSocket("wss://xq.kzw.ink/ws");

  if (location["protocol"] != "https:") {
    if (confirm("该通道未加密，部分功能将缺失，是否跳转到加密通道？")) {
      location["href"] = "https://xq.kzw.ink";
      return false;
    }
  }

  var _0x599aff = false;

  _0x9d4fa9["onopen"] = async function () {
    var _0x527162 = true;
    var _0x41b105 = {
      "cmd": "join",
      "channel": _0x59091f,
      "client_key": "XChatYYDS_"
    };

    if (!_0x599aff) {
      if (_0x3ee7b3("auto-login") == "true" && _0x3ee7b3("my-nick")) {
        _0x427175 = _0x3ee7b3("my-nick");
        _0x41b105["nick"] = _0x427175;

        if (_0x3da41e) {
          _0x41b105["cookie"] = _0x3da41e;
        }
      } else {
        if (location["hash"]) {
          _0x427175 = location["hash"]["substr"](1);
        } else {
          if (_0x3da41e && _0x427175) {
            if (confirm("是否使用这个用户信息登录：\n" + _0x427175)) {
              _0x41b105["nick"] = _0x427175;
              _0x41b105["cookie"] = _0x3da41e;
            } else {
              var _0x5890a1 = prompt("昵称:", "");

              if (_0x5890a1 !== null) {
                _0x427175 = _0x5890a1;
                _0x41b105["nick"] = _0x427175;
              } else {
                _0x527162 = false;
              }
            }
          } else {
            var _0x5890a1 = prompt("昵称:", "");

            if (_0x5890a1 !== null) {
              _0x427175 = _0x5890a1;
              _0x41b105["nick"] = _0x427175;
            } else {
              _0x527162 = false;
            }
          }
        }
      }
    }

    if (!/^[a-zA-Z0-9_]{1,20}$/["test"](_0x427175["split"]("#")[0]) && _0x91ccfb) {
      alert("要连接HC，需要使用英文昵称，并且昵称需要少于20位。您可以继续使用，但HC服务器不会连接。");
    }

    _0x16f2e9("allow-imgur", true);

    _0x500488 = true;
    await _0x393e41();

    if (_0x427175 && _0x527162) {
      _0x5942aa({
        "nick": "*",
        "text": "正在加入聊天室，这可能需要一些时间，请稍后。。。"
      });

      _0x16f2e9("my-nick", _0x427175["split"]("#")[0]);

      console["log"](_0x2a02ea);
      _0x41b105["murmur"] = _0xa3aae(_0x2a02ea)["toString"]();
      console["log"](_0x41b105["murmur"]);

      _0x2b04b8(_0x41b105);
    }

    var _0x3a692b = document["querySelector"]("#mynick");

    _0x3a692b["innerHTML"] = "当前昵称：" + _0x427175["split"]("#")[0];
    console["log"](_0x43fb8e);
    _0x599aff = true;
  };

  _0x9d4fa9["onclose"] = function () {
    if (_0x599aff) {
      _0x5942aa({
        "nick": "!",
        "text": "掉线啦！正在重新连接。。。"
      });
    }

    window["setTimeout"](function () {
      _0x56b19e(_0x59091f);
    }, 2000);
  };

  _0x9d4fa9["onmessage"] = function (_0x1bad1e) {
    var _0x464274 = JSON["parse"](_0x1bad1e["data"]);

    var _0x36088c = _0x464274["cmd"];
    var _0x427fc0 = _0x28bde3[_0x36088c];

    _0x427fc0["call"](null, _0x464274);
  };
}

function _0xa3aae(_0x1da649) {
  var _0x3b591d = key = "fa_hJSFenvc0dJ24";

  return CryptoJS["AES"]["encrypt"](_0x1da649, CryptoJS["enc"]["Utf8"]["parse"](key), {
    "iv": CryptoJS["enc"]["Utf8"]["parse"](_0x3b591d),
    "mode": CryptoJS["mode"]["CBC"],
    "padding": CryptoJS["pad"]["Pkcs7"]
  });
}

function _0x3037e9(_0x10bbe6) {
  _0x384b85 = new WebSocket("wss://hack.chat/chat-ws");
  var _0x167378 = false;

  _0x384b85["onopen"] = function () {
    var _0x32f120 = true;

    if (_0x427175 && _0x32f120) {
      if (_0x10bbe6 == "xq102210") {
        _0x10bbe6 = "your-channel";
      }

      var _0x5d928d = {
        "cmd": "join",
        "channel": _0x10bbe6,
        "nick": "XC_" + _0x427175["split"]("#")[0],
        "password": _0x427175["split"]("#")[1]
      };

      _0x384b85["send"](JSON["stringify"](_0x5d928d));
    }

    _0x167378 = true;
  };

  _0x384b85["onclose"] = function () {
    if (_0x167378) {
      _0x5942aa({
        "nick": "!",
        "text": "HC服务器已掉线，这不影响XC服务器，您可以刷新重试"
      });
    }
  };

  _0x384b85["onmessage"] = function (_0x5ae351) {
    if (_0x91ccfb) {
      var _0x326b11 = JSON["parse"](_0x5ae351["data"]);

      var _0x9124c4 = _0x326b11["cmd"];

      if (_0x326b11["text"] && _0x326b11["text"]["indexOf"]("New beta available") == -1 && _0x326b11["nick"] != "XC_" + _0x427175["split"]("#")[0] && _0x9124c4 == "chat" && _0x326b11["nick"]["indexOf"]("XC_") < 0) {
        if (_0x9124c4 == "chat" || _0x9124c4 == "join" || _0x9124c4 == "info" && _0x326b11["type"] == "whisper") {
          console["log"](_0x326b11);
          var _0x5f4d36 = _0x28bde3[_0x9124c4];
          _0x326b11["nick"] = "HC_" + _0x326b11["nick"];
          _0x326b11["head"] = "https://hack.chat/android-icon-72x72.png";

          _0x5f4d36["call"](null, _0x326b11);
        }
      }
    }
  };
}

nicks = null;

function _0x5942aa(_0x4bee61) {
  var _0x11f1d7 = document["createElement"]("div");

  if (!_0x4bee61["tag"]) {
    if (typeof _0x427175 === "string" && (_0x4bee61["text"]["match"](new RegExp("@" + _0x427175["split"]("#")[0] + "\\b", "gi")) || (_0x4bee61["type"] === "whisper" || _0x4bee61["type"] === "invite") && _0x4bee61["from"])) {
      _0x441e6d(_0x4bee61);
    }
  }

  _0x11f1d7["classList"]["add"]("message");

  if (_0x4bee61["nick"] == "!") {
    _0x11f1d7["classList"]["add"]("warn");
  } else {
    if (_0x4bee61["nick"] == "*") {
      _0x11f1d7["classList"]["add"]("info");
    } else {
      if (_0x4bee61["admin"]) {
        _0x11f1d7["classList"]["add"]("admin");
      } else {
        if (_0x4bee61["mod"]) {
          _0x11f1d7["classList"]["add"]("mod");
        } else {
          if (_0x4bee61["tag"] == "old") {
            _0x11f1d7["classList"]["add"]("me");
          }
        }
      }
    }
  }

  var _0x214a36 = document["createElement"]("span");

  _0x214a36["classList"]["add"]("nick");

  _0x11f1d7["appendChild"](_0x214a36);

  if (_0x4bee61["trip"]) {
    var _0x2f2599 = document["createElement"]("span");

    if (_0x4bee61["mod"] || _0x4bee61["admin"]) {
      _0x2f2599["textContent"] = String["fromCodePoint"](11088) + " " + _0x4bee61["trip"] + " ";
    } else {
      _0x2f2599["textContent"] = _0x4bee61["trip"] + " ";
    }

    _0x2f2599["classList"]["add"]("trip");

    _0x214a36["appendChild"](_0x2f2599);
  }

  if (_0x4bee61["nick"]) {
    var _0xb488af = document["createElement"]("a");

    _0xb488af["textContent"] = _0x4bee61["nick"];

    var _0x2c5c54 = document["createElement"]("img");

    _0x2c5c54["src"] = _0x100c66;
    _0x2c5c54["style"]["height"] = "25px";
    _0x2c5c54["style"]["width"] = "25px";
    _0x2c5c54["style"]["marginRight"] = "0.5rem";
    _0x2c5c54["style"]["verticalAlign"] = "top";
    _0x2c5c54["style"]["borderRadius"] = "50%";

    _0xb488af["onclick"] = function () {
      if (_0x4bee61["type"] == "whisper" || _0x4bee61["nick"] == "*" || _0x4bee61["nick"] == "!") {
        _0x29ce7f(_0x4bee61["text"]);

        _0x5375fc("#chat-input")["focus"]();

        return;
      } else {
        var _0x557e62 = _0x4bee61["nick"];

        if (_0x4bee61["nick"]["startsWith"]("HC_")) {
          _0x557e62 = _0x557e62["replace"]("HC_", "");
        }

        _0x29ce7f("@" + _0x557e62 + " ");

        _0x5375fc("#chatinput")["focus"]();

        return;
      }
    };

    _0xb488af["oncontextmenu"] = function (_0x22f642) {
      _0x22f642["preventDefault"]();

      var _0x53df2a = "";
      var _0x36f57e = _0x4bee61["text"];
      var _0x5f3d9b = false;

      if (_0x36f57e["length"] > 350) {
        _0x53df2a = _0x36f57e["slice"](0, 350);
        _0x5f3d9b = true;
      }

      if (_0x4bee61["trip"]) {
        _0x53df2a = ">" + _0x4bee61["trip"] + " " + _0x4bee61["nick"] + "：\n";
      } else {
        _0x53df2a = ">" + _0x4bee61["nick"] + "：\n";
      }

      _0x36f57e = _0x36f57e["split"]("\n");

      if (_0x36f57e["length"] >= 8) {
        _0x36f57e = _0x36f57e["slice"](0, 8);
        _0x5f3d9b = true;
      }

      for (var _0x1d017c of _0x36f57e) {
        if (!_0x1d017c["startsWith"](">>")) {
          _0x53df2a += ">" + _0x1d017c + "\n";
        }
      }

      if (_0x5f3d9b) {
        _0x53df2a += ">……\n";
      }

      _0x53df2a += "\n";

      if (_0x4bee61["nick"] != _0x427175) {
        var _0xdb3083 = _0x4bee61["nick"];

        if (_0x4bee61["nick"]["startsWith"]("HC_")) {
          _0xdb3083 = _0xdb3083["replace"]("HC_", "");
        }

        _0x53df2a += "@" + _0xdb3083 + " ";
      }

      _0x53df2a += _0x5375fc("#chatinput")["value"];
      _0x5375fc("#chatinput")["value"] = "";

      _0x29ce7f(_0x53df2a);

      _0x5375fc("#chatinput")["focus"]();
    };

    var _0xbcf365 = new Date(_0x4bee61["time"] || Date["now"]());

    _0xb488af["title"] = _0xbcf365["toLocaleString"]();

    if (!(_0x4bee61["nick"] == "*" || _0x4bee61["nick"] == "!")) {
      if (_0x1b12dd) {
        _0x214a36["appendChild"](_0x2c5c54);
      }
    }

    _0x214a36["appendChild"](_0xb488af);
  }

  if (_0x4bee61["color"] && /(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i["test"](_0x4bee61["color"])) {
    _0xb488af["setAttribute"]("style", "color:#" + _0x4bee61["color"] + " !important");
  }

  var _0x5daf1e = document["createElement"]("p");

  _0x5daf1e["classList"]["add"]("text");

  if (!_0x4bee61["tag"]) {
    var _0x2de4e5 = "";

    if (_0x4bee61["text"]["indexOf"]("USERSENDVOICE_") >= 0 && _0x51f940) {
      _0x2de4e5 = "<audio controls><source src=\"https://xq.kzw.ink/oss/" + _0x4bee61["text"]["replace"]("USERSENDVOICE_", "")["replace"]("static/", "") + "\" type=\"audio/mpeg\"></audio>";
    } else {
      _0x2de4e5 = _0x43a021["render"](_0x4bee61["text"]);
    }

    _0x5daf1e["innerHTML"] = _0x2de4e5;
  } else {
    var _0x2de4e5 = "";

    _0x4bee61["text"]["forEach"](_0x519322 => {
      var _0x2aba99 = _0x43a021["render"](_0x519322["content"]);

      if (_0x519322["head"]) {
        head_pic = _0x519322["head"];
      } else {
        head_pic = _0x5b7879;
      }

      console["log"]($(_0x2aba99)["text"]());

      if (_0x2aba99["indexOf"]("USERSENDVOICE_") >= 0 && _0x51f940) {
        var _0x4cd2a0 = $(_0x2aba99)["text"]();

        if (_0x1b12dd) {
          _0x2de4e5 = "<div class=\"message\"><span class=\"nick\"><span class=\"trip\">" + _0x519322["trip"] + " </span><img src=\"" + head_pic + "\" style=\"height: 25px; width: 25px; margin-right: 0.5rem; vertical-align: top; border-top-left-radius: 50%; border-top-right-radius: 50%; border-bottom-right-radius: 50%; border-bottom-left-radius: 50%;\"><a title=\"" + _0x519322["time"] + "\">" + _0x519322["nick"] + "</a></span><p class=\"text\"><p style=\"margin-left: 2rem;\"><audio controls><source src=\"https://xq.kzw.ink/oss/" + _0x4cd2a0["replace"]("USERSENDVOICE_", "")["replace"]("static/", "") + "\" type=\"audio/mpeg\"></audio></p></p></div>" + _0x2de4e5;
        } else {
          _0x2de4e5 = "<div class=\"message\"><span class=\"nick\"><span class=\"trip\">" + _0x519322["trip"] + " </span><a title=\"" + _0x519322["time"] + "\">" + _0x519322["nick"] + "</a></span><p class=\"text\"><p><audio controls><source src=\"https://xq.kzw.ink/oss/" + _0x4cd2a0["replace"]("USERSENDVOICE_", "")["replace"]("static/", "") + "\" type=\"audio/mpeg\"></audio></p></p></div>" + _0x2de4e5;
        }
      } else {
        if (_0x1b12dd) {
          _0x2de4e5 = "<div class=\"message\"><span class=\"nick\"><span class=\"trip\">" + _0x519322["trip"] + " </span><img src=\"" + head_pic + "\" style=\"height: 25px; width: 25px; margin-right: 0.5rem; vertical-align: top; border-top-left-radius: 50%; border-top-right-radius: 50%; border-bottom-right-radius: 50%; border-bottom-left-radius: 50%;\"><a title=\"" + _0x519322["time"] + "\">" + _0x519322["nick"] + "</a></span><p class=\"text\"><p style=\"margin-left: 2rem;\">" + _0x2aba99 + "</p></p></div>" + _0x2de4e5;
        } else {
          _0x2de4e5 = "<div class=\"message\"><span class=\"nick\"><span class=\"trip\">" + _0x519322["trip"] + " </span><a title=\"" + _0x519322["time"] + "\">" + _0x519322["nick"] + "</a></span><p class=\"text\"><p>" + _0x2aba99 + "</p></p></div>" + _0x2de4e5;
        }
      }
    });

    _0x5daf1e["innerHTML"] = _0x2de4e5;
  }

  _0x11f1d7["appendChild"](_0x5daf1e);

  var _0x26740a = _0x44e645();

  _0x5375fc("#messages")["appendChild"](_0x11f1d7);

  if (_0x26740a) {
    window["scrollTo"](0, document["body"]["scrollHeight"]);
  }

  _0xfb6411 += 1;

  _0x58039a();
}

function _0x25b98f(_0x194222) {
  var _0x35dee9 = document["createElement"]("div");

  _0x35dee9["classList"]["add"]("message");

  if (_0x2cd77a(_0x427175) && _0x194222["nick"] == _0x427175) {
    _0x35dee9["classList"]["add"]("me");
  } else {
    if (_0x194222["nick"] == "!") {
      _0x35dee9["classList"]["add"]("warn");
    } else {
      if (_0x194222["nick"] == "*") {
        _0x35dee9["classList"]["add"]("info");
      } else {
        if (_0x194222["admin"]) {
          _0x35dee9["classList"]["add"]("admin");
        } else {
          if (_0x194222["mod"]) {
            _0x35dee9["classList"]["add"]("mod");
          }
        }
      }
    }
  }

  var _0x4e420a = document["createElement"]("span");

  _0x4e420a["classList"]["add"]("nick");

  _0x35dee9["appendChild"](_0x4e420a);

  if (_0x194222["trip"]) {
    var _0x4dcbb9 = document["createElement"]("span");

    if (_0x194222["mod"] || _0x194222["admin"]) {
      _0x4dcbb9["textContent"] = String["fromCodePoint"](11088) + " " + _0x194222["trip"] + " ";
    } else {
      _0x4dcbb9["textContent"] = _0x194222["trip"] + " ";
    }

    _0x4dcbb9["classList"]["add"]("trip");

    _0x4e420a["appendChild"](_0x4dcbb9);
  }

  if (_0x194222["nick"]) {
    var _0x5e1704 = document["createElement"]("a");

    _0x5e1704["textContent"] = _0x194222["nick"];

    var _0x5f8384 = new Date(_0x194222["time"] || Date["now"]());

    _0x5e1704["title"] = _0x5f8384["toLocaleString"]();

    _0x4e420a["appendChild"](_0x5e1704);
  }

  var _0x569c81 = document["createElement"]("div");

  _0x569c81["classList"]["add"]("text");

  _0x569c81["innerHTML"] = _0x194222["text"];

  _0x35dee9["appendChild"](_0x569c81);

  var _0x1c2d6d = _0x44e645();

  _0x5375fc("#messages")["appendChild"](_0x35dee9);

  if (_0x1c2d6d) {
    window["scrollTo"](0, document["body"]["scrollHeight"]);
  }

  _0x58039a();
}

function _0x29ce7f(_0x1a530b) {
  var _0x541a3d = _0x5375fc("#chatinput");

  var _0x468f96 = _0x541a3d["selectionStart"] || 0;

  var _0x14269f = _0x541a3d["value"]["substr"](0, _0x468f96);

  var _0x36e687 = _0x541a3d["value"]["substr"](_0x468f96);

  _0x14269f += _0x1a530b;
  _0x541a3d["value"] = _0x14269f + _0x36e687;
  _0x541a3d["selectionStart"] = _0x541a3d["selectionEnd"] = _0x14269f["length"];

  _0xe62ddc();
}

function _0x2b04b8(_0x55af69) {
  if (_0x9d4fa9 && _0x9d4fa9["readyState"] == _0x9d4fa9["OPEN"]) {
    console["log"](_0x55af69);

    if (_0x596541) {
      _0x55af69["show"] = 1;
    } else {
      _0x55af69["show"] = 0;
    }

    if (_0x3ee7b3("head")) {
      _0x55af69["head"] = _0x3ee7b3("head");
    } else {
      _0x55af69["head"] = _0x5b7879;
    }

    if (_0x3ee7b3("killed") != 1) {
      if (_0x5f4c13) {
        if (_0x55af69["text"]) {
          if (_0x55af69["text"]["startsWith"]("/")) {
            _0x55af69["text"] = _0x55af69["text"]["substr"](1);

            var [_0x293033, _0x298757] = _0x55af69["text"]["split"](" ");

            if (_0x293033 == "video") {
              console["log"](_0x298757);
              var _0xaeaa5d = {
                "cmd": "set_video",
                "url": _0x298757
              };

              _0x9d4fa9["send"](JSON["stringify"](_0xaeaa5d));

              return false;
            }

            _0x55af69["text"] = "/" + _0x55af69["text"];
          }
        }

        if (_0x6a10d5) {
          if (_0x91ccfb && _0x384b85 && _0x384b85["readyState"] == _0x384b85["OPEN"] && _0x55af69["text"]["startsWith"]("hc-")) {
            _0x55af69["text"] = _0x55af69["text"]["replace"]("hc-", "");

            if (!_0x55af69["text"]["startsWith"]("/") || _0x55af69["text"]["startsWith"]("/w") || _0x55af69["text"]["startsWith"]("/r")) {
              _0x384b85["send"](JSON["stringify"](_0x55af69));
            }
          }
        }

        _0x9d4fa9["send"](JSON["stringify"](_0x55af69));
      } else {
        _0x5942aa({
          "nick": "*",
          "text": "当前昵称已被预留，请更换昵称"
        });
      }
    } else {
      alert("你已被管理员封杀，无法执行此操作。");
    }
  }
}

var _0x297741 = true;
var _0xfb6411 = 0;

window["onfocus"] = function () {
  _0x297741 = true;

  _0x58039a();
};

window["onblur"] = function () {
  _0x297741 = false;
};

window["onscroll"] = function () {
  if (_0x44e645()) {
    _0x58039a();
  }
};

function _0x44e645() {
  return window["innerHeight"] + window["scrollY"] >= document["body"]["scrollHeight"] - 1;
}

function _0x58039a() {
  if (_0x297741 && _0x44e645()) {
    _0xfb6411 = 0;
  }

  var _0x17fdec;

  if (_0x42b30c) {
    _0x17fdec = "?" + _0x42b30c;
  } else {
    _0x17fdec = "XChat";
  }

  if (_0xfb6411 > 0) {
    _0x17fdec = "(" + _0xfb6411 + ") " + _0x17fdec;
  }

  document["title"] = _0x17fdec;
}

_0x5375fc("#footer")["onclick"] = function () {
  _0x5375fc("#chatinput")["focus"]();
};

_0x5375fc("#chatinput")["onkeydown"] = function (_0x35441d) {
  if (_0x35441d["keyCode"] == 13 && !_0x35441d["shiftKey"]) {
    _0x35441d["preventDefault"]();

    if (_0x35441d["target"]["value"] != "") {
      var _0x548ac8 = _0x35441d["target"]["value"];
      _0x35441d["target"]["value"] = "";

      _0x2b04b8({
        "cmd": "chat",
        "text": _0x548ac8
      });

      _0x11cdef[0] = _0x548ac8;

      _0x11cdef["unshift"]("");

      _0x1edaea = 0;

      _0xe62ddc();
    }
  } else {
    if (_0x35441d["keyCode"] == 38) {
      if (_0x35441d["target"]["selectionStart"] === 0 && _0x1edaea < _0x11cdef["length"] - 1) {
        _0x35441d["preventDefault"]();

        if (_0x1edaea == 0) {
          _0x11cdef[0] = _0x35441d["target"]["value"];
        }

        _0x1edaea += 1;
        _0x35441d["target"]["value"] = _0x11cdef[_0x1edaea];
        _0x35441d["target"]["selectionStart"] = _0x35441d["target"]["selectionEnd"] = _0x35441d["target"]["value"]["length"];

        _0xe62ddc();
      }
    } else {
      if (_0x35441d["keyCode"] == 40) {
        if (_0x35441d["target"]["selectionStart"] === _0x35441d["target"]["value"]["length"] && _0x1edaea > 0) {
          _0x35441d["preventDefault"]();

          _0x1edaea -= 1;
          _0x35441d["target"]["value"] = _0x11cdef[_0x1edaea];
          _0x35441d["target"]["selectionStart"] = _0x35441d["target"]["selectionEnd"] = 0;

          _0xe62ddc();
        }
      } else {
        if (_0x35441d["keyCode"] == 27) {
          _0x35441d["preventDefault"]();

          _0x35441d["target"]["value"] = "";
          _0x1edaea = 0;
          _0x11cdef[_0x1edaea] = "";

          _0xe62ddc();
        } else {
          if (_0x35441d["keyCode"] == 9) {
            if (_0x35441d["ctrlKey"]) {
              return;
            }

            _0x35441d["preventDefault"]();

            var _0x5e20ae = _0x35441d["target"]["selectionStart"] || 0;

            var _0x548ac8 = _0x35441d["target"]["value"];

            var _0x561d4d = _0x548ac8["lastIndexOf"]("@", _0x5e20ae);

            var _0x25b0d2 = false;

            if (_0x561d4d >= 0) {
              var _0x241615 = _0x548ac8["substring"](_0x561d4d + 1, _0x5e20ae)["toLowerCase"]();

              var _0x25cb65 = _0x135f99["filter"](function (_0x161d60) {
                return _0x161d60["toLowerCase"]()["indexOf"](_0x241615) == 0;
              });

              if (_0x25cb65["length"] > 0) {
                _0x25b0d2 = true;

                if (_0x25cb65["length"] == 1) {
                  _0x29ce7f(_0x25cb65[0]["substr"](_0x241615["length"]) + " ");
                }
              }
            }

            if (!_0x25b0d2) {
              _0x29ce7f("\t");
            }
          }
        }
      }
    }
  }
};

function _0xe62ddc() {
  var _0x13144a = _0x44e645();

  var _0x38647e = _0x5375fc("#chatinput");

  _0x38647e["style"]["height"] = 0;
  _0x38647e["style"]["height"] = _0x38647e["scrollHeight"] + "px";
  document["body"]["style"]["marginBottom"] = _0x5375fc("#footer")["offsetHeight"] + "px";

  if (_0x13144a) {
    window["scrollTo"](0, document["body"]["scrollHeight"]);
  }
}

_0x5375fc("#chatinput")["oninput"] = function () {
  _0xe62ddc();
};

_0xe62ddc();

_0x5375fc("#sidebar")["onmouseenter"] = _0x5375fc("#sidebar")["ontouchstart"] = function (_0x16a1c5) {
  _0x5375fc("#sidebar-content")["classList"]["remove"]("hidden");

  _0x5375fc("#sidebar")["classList"]["add"]("expand");

  _0x16a1c5["stopPropagation"]();
};

_0x5375fc("#sidebar")["onmouseleave"] = document["ontouchstart"] = function (_0x23ffda) {
  var _0x3aba6f = _0x23ffda["toElement"] || _0x23ffda["relatedTarget"];

  try {
    if (_0x3aba6f["parentNode"] == this || _0x3aba6f == this) {
      return;
    }
  } catch (_0x42a036) {
    return;
  }

  if (!_0x5375fc("#pin-sidebar")["checked"]) {
    _0x5375fc("#sidebar-content")["classList"]["add"]("hidden");

    _0x5375fc("#sidebar")["classList"]["remove"]("expand");
  }
};

_0x5375fc("#clear-messages")["onclick"] = function () {
  var _0xcc1979 = _0x5375fc("#messages");

  _0xcc1979["innerHTML"] = "";
};

_0x5375fc("#set-bgimage")["onclick"] = function () {
  if (_0x3ee7b3("bgurl") != null) {
    var _0x33424a = prompt("背景图片地址:", _0x3ee7b3("bgurl"));
  } else {
    var _0x33424a = prompt("背景图片地址:");
  }

  if (_0x33424a == "") {
    alert("地址不能为空");
  } else {
    if (_0x33424a) {
      if (_0x5375fc(".bg-img")) {
        _0x5375fc("#body")["removeChild"](_0x5375fc(".bg-img"));
      }

      _0x5375fc("#scheme-link")["href"] = "schemes/clear.css";
      console["log"](_0x5375fc("#body")["style"]);

      var _0x1cff48 = document["createElement"]("div");

      console["log"](_0x1cff48);
      _0x1cff48["className"] = "bg-img";
      _0x1cff48["style"]["backgroundImage"] = "url(" + _0x33424a["replace"]("\"") + ")";

      _0x5375fc("#body")["appendChild"](_0x1cff48);

      var _0x466ce8 = document["querySelector"]("#scheme-selector");

      _0x466ce8["selectedIndex"] = 34;

      _0x16f2e9("bgurl", _0x33424a);
    }
  }
};

_0x5375fc("#set-head")["onclick"] = function () {
  if (_0x3ee7b3("head") != null) {
    var _0xc93561 = prompt("头像地址:", _0x3ee7b3("head"));
  } else {
    var _0xc93561 = prompt("头像地址:");
  }

  if (_0xc93561 == "") {
    alert("地址不能为空");
    _0x100c66 = _0x5b7879;

    _0x16f2e9("head", "");
  } else {
    if (_0xc93561) {
      _0x100c66 = _0xc93561;

      _0x16f2e9("head", _0x100c66);
    }
  }
};

_0x5375fc("#clear-nick")["onclick"] = function () {
  _0x16f2e9("my-nick", "");

  _0x16f2e9("auto-login", "false");

  _0x16f2e9("cookie", "");

  _0x5942aa({
    "cmd": "chat",
    "nick": "*",
    "text": "已清除您的登录信息！",
    "time": null
  });
};

_0x5375fc("#lay-video")["onclick"] = function () {
  _0x9d4fa9["send"](JSON["stringify"](_0x4178f7));
};

if (_0x3ee7b3("pin-sidebar") == "true") {
  _0x5375fc("#pin-sidebar")["checked"] = true;

  _0x5375fc("#sidebar-content")["classList"]["remove"]("hidden");
}

if (_0x3ee7b3("joined-left") == "false") {
  _0x5375fc("#joined-left")["checked"] = false;
}

if (_0x3ee7b3("parse-latex") == "false") {
  _0x5375fc("#parse-latex")["checked"] = false;

  _0x43a021["inline"]["ruler"]["disable"](["katex"]);

  _0x43a021["block"]["ruler"]["disable"](["katex"]);
}

_0x5375fc("#pin-sidebar")["onchange"] = function (_0x470944) {
  _0x16f2e9("pin-sidebar", !!_0x470944["target"]["checked"]);
};

_0x5375fc("#joined-left")["onchange"] = function (_0x253a01) {
  _0x16f2e9("joined-left", !!_0x253a01["target"]["checked"]);
};

_0x5375fc("#parse-latex")["onchange"] = function (_0xadc2e8) {
  if (!_0x11ef0a) {
    var _0x5418e = !!_0xadc2e8["target"]["checked"];

    _0x16f2e9("parse-latex", _0x5418e);

    if (_0x5418e) {
      _0x43a021["inline"]["ruler"]["enable"](["katex"]);

      _0x43a021["block"]["ruler"]["enable"](["katex"]);
    } else {
      _0x43a021["inline"]["ruler"]["disable"](["katex"]);

      _0x43a021["block"]["ruler"]["disable"](["katex"]);
    }
  }
};

if (_0x3ee7b3("syntax-highlight") == "false") {
  _0x5375fc("#syntax-highlight")["checked"] = false;
  _0x13d51b["doHighlight"] = false;
}

_0x5375fc("#syntax-highlight")["onchange"] = function (_0x47f920) {
  var _0x44d16c = !!_0x47f920["target"]["checked"];

  _0x16f2e9("syntax-highlight", _0x44d16c);

  _0x13d51b["doHighlight"] = _0x44d16c;
};

if (_0x3ee7b3("allow-imgur") == "false") {
  _0x5375fc("#allow-imgur")["checked"] = false;
  _0x500488 = false;
}

_0x5375fc("#allow-imgur")["onchange"] = function (_0x5b09f3) {
  if (!_0x11ef0a) {
    var _0x3a9f1b = !!_0x5b09f3["target"]["checked"];

    _0x16f2e9("allow-imgur", _0x3a9f1b);

    _0x500488 = _0x3a9f1b;
  }
};

if (_0x3ee7b3("allow-old") == "false") {
  _0x5375fc("#allow-old")["checked"] = false;
  _0x43fb8e = false;
}

_0x5375fc("#allow-old")["onchange"] = function (_0x4b7d25) {
  var _0x330530 = !!_0x4b7d25["target"]["checked"];

  _0x16f2e9("allow-old", _0x330530);

  _0x43fb8e = _0x330530;
};

if (_0x3ee7b3("add-old") == "false") {
  _0x5375fc("#add-old")["checked"] = false;
  _0x596541 = false;
}

_0x5375fc("#add-old")["onchange"] = function (_0x419453) {
  var _0x102a35 = !!_0x419453["target"]["checked"];

  _0x16f2e9("add-old", _0x102a35);

  _0x596541 = _0x102a35;
};

if (_0x3ee7b3("show-head") == "false") {
  _0x5375fc("#show-head")["checked"] = false;
  _0x1b12dd = false;
}

_0x5375fc("#show-head")["onchange"] = function (_0x380c91) {
  var _0x5817ba = !!_0x380c91["target"]["checked"];

  _0x16f2e9("show-head", _0x5817ba);

  _0x1b12dd = _0x5817ba;
};

if (_0x3ee7b3("auto-login") == "true") {
  _0x5375fc("#auto-login")["checked"] = true;
  _0x4f66c6 = true;
}

_0x5375fc("#auto-login")["onchange"] = function (_0x2930db) {
  var _0x27a4f5 = !!_0x2930db["target"]["checked"];

  _0x16f2e9("auto-login", _0x27a4f5);

  _0x4f66c6 = _0x27a4f5;
};

if (_0x3ee7b3("show-voice-btn") == "false") {
  _0x5375fc("#show-voice-btn")["checked"] = false;
  _0x4d4aed = false;
  $("#voice")["hide"]();
}

_0x5375fc("#show-voice-btn")["onchange"] = function (_0x477fe5) {
  var _0x35b534 = !!_0x477fe5["target"]["checked"];

  _0x16f2e9("show-voice-btn", _0x35b534);

  _0x4d4aed = _0x35b534;

  if (_0x4d4aed) {
    $("#voice")["show"]();
  } else {
    $("#voice")["hide"]();
  }
};

if (_0x3ee7b3("show-voice-msg") == "false") {
  _0x5375fc("#show-voice-msg")["checked"] = false;
  _0x51f940 = false;
}

_0x5375fc("#show-voice-msg")["onchange"] = function (_0x3142fa) {
  var _0x217af1 = !!_0x3142fa["target"]["checked"];

  _0x16f2e9("show-voice-msg", _0x217af1);

  _0x51f940 = _0x217af1;
};

_0x16f2e9("ws-hc", "false");

var _0x135f99 = [];
var _0xb64edb = [];

function _0x122bd3(_0xe77d1a) {
  var _0x48f0bd = document["createElement"]("a");

  _0x48f0bd["textContent"] = _0xe77d1a;

  _0x48f0bd["onclick"] = function (_0x33d27c) {
    _0x463583(_0xe77d1a);
  };

  var _0x17eb08 = document["createElement"]("li");

  _0x17eb08["appendChild"](_0x48f0bd);

  _0x5375fc("#users")["appendChild"](_0x17eb08);

  _0x135f99["push"](_0xe77d1a);
}

setInterval(function () {
  _0x70c316();
}, 4000);

function _0x3cde5b(_0x42b6c0) {
  var _0x57cbec = _0x5375fc("#users");

  var _0x38ae54 = _0x57cbec["children"];

  for (var _0x3279e0 = 0; _0x3279e0 < _0x38ae54["length"]; _0x3279e0++) {
    var _0x48dba6 = _0x38ae54[_0x3279e0];

    if (_0x48dba6["textContent"] == _0x42b6c0) {
      _0x57cbec["removeChild"](_0x48dba6);
    }
  }

  var _0x5b54b0 = _0x135f99["indexOf"](_0x42b6c0);

  if (_0x5b54b0 >= 0) {
    _0x135f99["splice"](_0x5b54b0, 1);
  }
}

function _0x550611() {
  var _0x4644da = _0x5375fc("#users");

  while (_0x4644da["firstChild"]) {
    _0x4644da["removeChild"](_0x4644da["firstChild"]);
  }

  _0x135f99["length"] = 0;
}

function _0x463583(_0x387ff7) {
  _0x2b04b8({
    "cmd": "invite",
    "nick": _0x387ff7
  });
}

function _0x175272(_0x1d921f) {
  _0xb64edb["push"](_0x1d921f);
}

var _0x5964a9;

function _0x495f84() {
  _0x5964a9 = Recorder();

  _0x5964a9["open"](function () {
    _0x5964a9["start"]();

    $("#voice")["text"]("结束录音");
  }, function (_0x5ac021, _0xd6c7b8) {
    alert((_0xd6c7b8 ? "用户拒绝了权限，" : "") + "无法录音:" + _0x5ac021);
  });
}

function _0x4da60d() {
  _0x5964a9["stop"](function (_0x2926da, _0x1e4101) {
    $("#voice")["text"]("发送语音");

    var _0x389534 = new FormData();

    _0x389534["append"]("upfile", _0x2926da, "voice.mp3");

    var _0x1171ad = new XMLHttpRequest();

    _0x1171ad["open"]("POST", "https://xq.kzw.ink/voice", Headers = _0x2893f7);

    _0x1171ad["onreadystatechange"] = function () {
      console["log"](_0x1171ad);

      if (_0x1171ad["readyState"] == 4) {
        var _0x34af77 = JSON["parse"](_0x1171ad["responseText"]);

        _0x2b04b8({
          "cmd": "chat",
          "text": "USERSENDVOICE_" + _0x34af77["src"]
        });
      }
    };

    _0x1171ad["send"](_0x389534);
  }, function (_0x395c5a) {
    alert("录音失败:" + _0x395c5a);
  });
}

var _0x3575bd;

$("#voice")["click"](function () {
  if ($(this)["text"]() == "发送语音") {
    _0x495f84();

    _0x4334ff();
  } else {
    clearInterval(_0x3575bd);

    _0x4da60d();
  }
});

function _0x4334ff() {
  var _0x45751f = 60;
  _0x3575bd = setInterval(() => {
    _0x45751f = _0x45751f - 1;
    $("#voice")["text"]("结束录音（" + _0x45751f + "秒）");

    if (_0x45751f == 0) {
      clearInterval(_0x3575bd);

      _0x4da60d();
    }
  }, 1000);
}

async function _0x393e41() {
  let _0x41d5d3 = {};
  var _0x26bddc = {
    "excludes": _0x41d5d3
  };
  await Fingerprint2["getPromise"]({})["then"](_0x5bea97 => {
    var _0x547080 = _0x5bea97["map"](function (_0x4af846) {
      return _0x4af846["value"];
    });

    _0x2a02ea = Fingerprint2["x64hash128"](_0x547080[19]["join"](""), 31);
  });
}

var _0x42adf4 = ["android", "android-white", "atelier-dune", "atelier-forest", "atelier-heath", "atelier-lakeside", "atelier-seaside", "banana", "bright", "bubblegum", "chalk", "default", "eighties", "fresh-green", "greenscreen", "hacker", "maniac", "mariana", "military", "mocha", "monokai", "nese", "ocean", "omega", "pop", "railscasts", "solarized", "tk-night", "tomorrow", "carrot", "lax", "Ubuntu", "gruvbox-light", "fried-egg", "background-img"];
var _0x11411f = ["agate", "androidstudio", "atom-one-dark", "darcula", "github", "rainbow", "tk-night", "tomorrow", "xcode", "zenburn"];
var _0x58ae27 = "atelier-dune";
var _0x349361 = "darcula";

function _0x1bc513(_0x3a824a) {
  _0x58ae27 = _0x3a824a;
  _0x5375fc("#scheme-link")["href"] = "schemes/" + _0x3a824a + ".css";

  _0x16f2e9("scheme", _0x3a824a);
}

function _0x3d0843(_0x378cc3) {
  _0x349361 = _0x378cc3;
  _0x5375fc("#highlight-link")["href"] = "vendor/hljs/styles/" + _0x378cc3 + ".min.css";

  _0x16f2e9("highlight", _0x378cc3);
}

_0x42adf4["forEach"](function (_0xdcaca9) {
  var _0x32a530 = document["createElement"]("option");

  _0x32a530["textContent"] = _0xdcaca9;
  _0x32a530["value"] = _0xdcaca9;

  if (_0x32a530["value"] == "background-img") {
    _0x32a530["disabled"] = true;
  }

  _0x5375fc("#scheme-selector")["appendChild"](_0x32a530);
});

_0x11411f["forEach"](function (_0x431c48) {
  var _0x4916cb = document["createElement"]("option");

  _0x4916cb["textContent"] = _0x431c48;
  _0x4916cb["value"] = _0x431c48;

  _0x5375fc("#highlight-selector")["appendChild"](_0x4916cb);
});

_0x5375fc("#scheme-selector")["onchange"] = function (_0x397d17) {
  _0x1bc513(_0x397d17["target"]["value"]);
};

_0x5375fc("#highlight-selector")["onchange"] = function (_0x5927b9) {
  _0x3d0843(_0x5927b9["target"]["value"]);
};

if (_0x3ee7b3("scheme")) {
  _0x1bc513(_0x3ee7b3("scheme"));
}

if (_0x3ee7b3("highlight")) {
  _0x3d0843(_0x3ee7b3("highlight"));
}

_0x5375fc("#scheme-selector")["value"] = _0x58ae27;
_0x5375fc("#highlight-selector")["value"] = _0x349361;

if (_0x42b30c == "") {
  var _0x1cf82b = {
    "text": _0x394662
  };

  _0x5942aa(_0x1cf82b);

  _0x5375fc("#footer")["classList"]["add"]("hidden");

  _0x5375fc("#sidebar")["classList"]["add"]("hidden");
} else {
  _0x56b19e(_0x42b30c);
}

function _0x70c316(_0x30c62c) {
  function _0x5e8fe8(_0x62d522) {
    if (typeof _0x62d522 === "string") {
      return function (_0x30646a) {}["constructor"]("while (true) {}")["apply"]("counter");
    } else {
      if (("" + _0x62d522 / _0x62d522)["length"] !== 1 || _0x62d522 % 20 === 0) {
        (function () {
          return true;
        })["constructor"]("debugger")["call"]("action");
      } else {
        (function () {
          return false;
        })["constructor"]("debugger")["apply"]("stateObject");
      }
    }

    _0x5e8fe8(++_0x62d522);
  }

  try {
    if (_0x30c62c) {
      return _0x5e8fe8;
    } else {
      _0x5e8fe8(0);
    }
  } catch (_0x48319f) {}
}